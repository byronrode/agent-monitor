@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Inter:wght@400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --bg: #09090b; --surface: #111113; --surface-2: #1a1a1f; --surface-3: #222228; --border: #27272a; --border-hover: #3f3f46;
  --text: #fafafa; --text-2: #a1a1aa; --text-3: #71717a; --green: #22c55e; --green-bg: rgba(34,197,94,0.1); --amber: #f59e0b;
  --amber-bg: rgba(245,158,11,0.1); --orange: #f97316; --orange-bg: rgba(249,115,22,0.12); --red: #ef4444; --red-bg: rgba(239,68,68,0.1); --blue: #3b82f6; --blue-bg: rgba(59,130,246,0.1);
  --purple: #a855f7; --purple-bg: rgba(168,85,247,0.08); --surface-tint-1: rgba(255,255,255,0.03); --surface-tint-2: rgba(255,255,255,0.02);
  --surface-tint-0: rgba(255,255,255,0); --focus-ring: rgba(59,130,246,0.2); --sheet-backdrop: rgba(0,0,0,0.55); --sheet-shadow: -14px 0 36px rgba(0,0,0,0.45);
  --mono: 'JetBrains Mono', monospace; --sans: 'Inter', system-ui, sans-serif; --control-height: 2rem;
}
:root:not(.dark) {
  --bg: #f7f8fb; --surface: #fff; --surface-2: #f2f4f8; --surface-3: #e8edf5; --border: #d7dde8; --border-hover: #b7c3d6;
  --text: #0f172a; --text-2: #334155; --text-3: #64748b; --green: #15803d; --green-bg: rgba(21,128,61,0.12); --amber: #b45309; --amber-bg: rgba(180,83,9,0.13); --orange: #c2410c; --orange-bg: rgba(194,65,12,0.13); --red: #b91c1c;
  --red-bg: rgba(185,28,28,0.12); --blue: #1d4ed8; --blue-bg: rgba(29,78,216,0.11); --surface-tint-1: rgba(15,23,42,0.04); --surface-tint-2: rgba(15,23,42,0.03); --surface-tint-0: rgba(15,23,42,0);
}
*{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--text);font-family:var(--sans)}

.topbar{display:flex;align-items:center;justify-content:space-between;gap:1rem;padding:.8rem 2rem .7rem;border-bottom:1px solid var(--border);background:linear-gradient(180deg,var(--surface-tint-2),var(--surface-tint-0)) var(--surface);position:sticky;top:0;z-index:100}
.topbar-left{display:flex;align-items:center;gap:.6rem}.brand-mark{width:42px;height:42px;border-radius:8px;background:var(--surface-tint-1);border:1px solid var(--border);padding:4px}.brand-copy h1{font-size:1rem;margin:0}
.subtitle-wrap{display:flex;align-items:center;gap:.45rem}.subtitle{color:var(--text-3);font-size:.72rem;font-family:var(--mono)}
.live-dot{width:6px;height:6px;border-radius:50%;background:var(--green);box-shadow:0 0 6px var(--green)}
.topbar-right{display:flex;align-items:center;gap:.55rem}
.header-controls-group{display:inline-flex;align-items:center;gap:.45rem;background:var(--surface-2);border:1px solid var(--border);border-radius:10px;padding:.28rem}
.view-toggle{display:flex;gap:.25rem;border:1px solid var(--border);border-radius:8px;background:var(--surface);padding:.15rem}
.control-btn{height:var(--control-height);min-height:var(--control-height);line-height:1;background:transparent;border:1px solid transparent;color:var(--text-3);font-family:var(--mono);font-size:.7rem;padding:0 .72rem;border-radius:6px;appearance:none;-webkit-appearance:none}
.control-btn.active{background:var(--blue-bg);border-color:color-mix(in srgb,var(--blue) 45%, transparent);color:#dbeafe}
.refresh-controls{display:flex;align-items:center;gap:.45rem;font-family:var(--mono);font-size:.72rem;color:var(--text-3)}
.control-select{height:var(--control-height);min-height:var(--control-height);padding:0 1.7rem 0 .75rem;line-height:1;appearance:none;-webkit-appearance:none;background-image:linear-gradient(45deg,transparent 50%,var(--text-3) 50%),linear-gradient(135deg,var(--text-3) 50%,transparent 50%);background-position:calc(100% - 13px) 50%,calc(100% - 8px) 50%;background-size:5px 5px,5px 5px;background-repeat:no-repeat}

.btn, select, input{background:var(--surface-2);border:1px solid var(--border);color:var(--text);font-family:var(--mono);font-size:.75rem;padding:.4rem .75rem;min-height:2rem;border-radius:6px}
.btn:hover,select:hover{border-color:var(--border-hover);background:var(--surface-3)}
.header-utility-btn{width:var(--control-height);min-width:var(--control-height);height:var(--control-height);min-height:var(--control-height);padding:0;display:inline-flex;align-items:center;justify-content:center;border-radius:8px;line-height:1;appearance:none;-webkit-appearance:none}

.page-nav{display:flex;gap:.25rem;padding:.5rem 2rem;border-bottom:1px solid var(--border);background:var(--surface)}
.page-link{border:1px solid transparent;background:transparent;color:var(--text-2);padding:.4rem .8rem;border-radius:8px;font-family:var(--mono);font-size:.72rem}
.page-link.active{background:var(--blue-bg);border-color:color-mix(in srgb,var(--blue) 45%, transparent);color:var(--text)}

.layout{display:flex;min-height:calc(100vh - 94px)}
.sidebar{width:220px;border-right:1px solid var(--border);background:var(--surface);padding:1rem 0;flex-shrink:0}
.sidebar-title{font-size:.65rem;text-transform:uppercase;letter-spacing:.1em;color:var(--text-3);padding:0 1rem;margin-bottom:.75rem}
.agent-item{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;cursor:pointer;font-size:.85rem}.agent-item:hover{background:var(--surface-2)}.agent-item.active{background:var(--surface-2);border-right:2px solid var(--blue)}
.agent-item .dot{width:8px;height:8px;border-radius:50%}.agent-item .count{margin-left:auto;font-family:var(--mono);font-size:.7rem;color:var(--text-3);background:var(--surface-3);padding:.1rem .4rem;border-radius:3px}

.main{flex:1;padding:1.5rem 2rem;overflow-y:auto}.stats{display:grid;grid-template-columns:repeat(5,1fr);gap:.75rem;margin-bottom:1rem}
.token-stats{grid-template-columns:repeat(3,1fr);margin-bottom:1.5rem}
.stat{background:var(--surface);border:1px solid var(--border);border-left-width:3px;border-radius:8px;padding:1rem}.stat .label{font-size:.7rem;color:var(--text-3);text-transform:uppercase;letter-spacing:.08em}.stat .value{font-size:1.4rem;font-weight:700;font-family:var(--mono);margin-top:.25rem}.stat .subvalue{font-family:var(--mono);font-size:.65rem;color:var(--text-3);margin-top:.35rem}
.stat.status-running{border-left-color:var(--green)}.stat.status-quiet{border-left-color:var(--amber)}.stat.status-stalled{border-left-color:var(--orange)}.stat.status-dead{border-left-color:var(--red)}.stat.status-total{border-left-color:var(--blue)}

.filters{display:grid;grid-template-columns:minmax(0,1.8fr) repeat(3,minmax(0,1fr));gap:.75rem;margin-bottom:1.5rem;padding:.75rem;border:1px solid var(--border);border-radius:10px}
.filter-field{display:flex;flex-direction:column;gap:.35rem}.filter-label{font-family:var(--mono);font-size:.65rem;color:var(--text-3);text-transform:uppercase;letter-spacing:.08em}
.filters input,.filters select,.filters .btn{width:100%;min-height:2.35rem;border-radius:8px;font-size:.78rem}.filter-clear{align-self:flex-end}

.run-list{display:flex;flex-direction:column;gap:.75rem}.run-card{background:var(--surface);border:1px solid var(--border);border-left-width:3px;border-radius:8px;overflow:hidden;cursor:pointer}.run-card:hover{border-color:var(--border-hover)}
.run-card-header{display:grid;grid-template-columns:90px 1fr auto;gap:1rem;padding:1rem 1.25rem;align-items:center}.run-status{display:flex;flex-direction:column;align-items:center;gap:.25rem}
.badge{font-family:var(--mono);font-size:.65rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;padding:.2rem .6rem;border-radius:4px;display:inline-flex;align-items:center}
.badge.running{background:var(--green-bg);color:var(--green)}.badge.done{background:var(--blue-bg);color:var(--blue)}.badge.failed,.badge.dead{background:var(--red-bg);color:var(--red)}.badge.stalled,.badge.timeout{background:var(--orange-bg);color:var(--orange)}.badge.quiet{background:var(--amber-bg);color:var(--amber)}.badge.unknown{background:var(--surface-3);color:var(--text-3)}
.time{font-family:var(--mono);font-size:.7rem;color:var(--text-3)}.title-row{display:flex;align-items:center;gap:.5rem;margin-bottom:.25rem}.name{font-weight:600;font-size:.9rem}.agent-tag,.model-tag,.token-chip{font-family:var(--mono);font-size:.65rem;padding:.1rem .5rem;border-radius:3px}.agent-tag{background:var(--purple-bg);color:var(--purple)}.model-tag{background:var(--surface-3);color:var(--text-2)}.token-chip{background:var(--surface-3);color:var(--text-2);display:inline-block;margin-top:.35rem}.task-preview{font-size:.8rem;color:var(--text-2)}.run-meta{font-family:var(--mono);font-size:.7rem;color:var(--text-3)}
.run-card.status-running,.lane-card.status-running{border-left-color:var(--green)}.run-card.status-quiet,.lane-card.status-quiet{border-left-color:var(--amber)}.run-card.status-stalled,.lane-card.status-stalled,.run-card.status-timeout,.lane-card.status-timeout{border-left-color:var(--orange)}.run-card.status-dead,.lane-card.status-dead,.run-card.status-failed,.lane-card.status-failed{border-left-color:var(--red)}.run-card.status-done,.lane-card.status-done{border-left-color:var(--blue)}

.lanes{display:flex;gap:.75rem;overflow-x:auto;padding-bottom:1rem}.lane{min-width:320px;max-width:400px;flex-shrink:0;background:var(--surface);border:1px solid var(--border);border-radius:8px;overflow:hidden}
.lane-header{padding:.75rem 1rem;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;background:var(--surface-2)}.lane-name{font-weight:600;font-size:.85rem}.lane-count{font-family:var(--mono);font-size:.7rem;color:var(--text-3)}
.lane-body{padding:.75rem;max-height:70vh;overflow-y:auto;display:flex;flex-direction:column;gap:.75rem}.lane-card{background:var(--bg);border:1px solid var(--border);border-left-width:3px;border-radius:6px;padding:.75rem;cursor:pointer}.lane-card:hover{border-color:var(--border-hover)}.lc-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:.35rem}.lc-label{font-weight:600;font-size:.8rem}.lc-task{font-size:.75rem;color:var(--text-2)}.lc-bottom{margin-top:.35rem;font-family:var(--mono);font-size:.65rem;color:var(--text-3);display:flex;align-items:center;justify-content:space-between;gap:.5rem}

.sheet-backdrop{position:fixed;inset:0;z-index:180;background:var(--sheet-backdrop)}.sheet-panel{position:fixed;top:0;right:0;width:min(680px,92vw);height:100vh;background:var(--surface);border-left:1px solid var(--border);z-index:190;display:flex;flex-direction:column;box-shadow:var(--sheet-shadow);padding:1rem;overflow:auto}
.panel-header{display:flex;align-items:center;justify-content:space-between}

@media (max-width: 980px){.layout{flex-direction:column}.sidebar{width:100%;display:flex;overflow:auto;padding:.5rem}.sidebar-title{display:none}.agent-item{border-right:0;border-bottom:2px solid transparent;white-space:nowrap}.agent-item.active{border-bottom-color:var(--blue)}.stats{grid-template-columns:1fr 1fr}.token-stats{grid-template-columns:1fr}.filters{grid-template-columns:1fr}.main{padding:1rem}.topbar,.page-nav{padding-left:1rem;padding-right:1rem}}
